<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mainpage</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@3.7.3/dist/full.css" rel="stylesheet" type="text/css"/>
<!--    <script src="js/script.js"></script>-->
</head>
<body style="overflow-x: hidden;">
<!-- 탑바 -->
<header>
    <div class="container">
        <!-- 왼쪽박스 -->
        <div class="top-bar__left-box">
            <!-- 로고 -->
            <h1>
                <button title="메인 바로가기" class="logo-link">
                    <a href="#"
                    ><img
                            src="https://i.postimg.cc/ydv1Q2Wt/car-poor-logo-img-black.png"
                            alt=""
                    /></a>
                </button>
            </h1>
        </div>

        <!-- 오른쪽 박스 -->
        <div class="top-bar__right-box">
            <!-- 아이콘 -->
            <div class="icon-box">
                <!-- 1 -->
                <!-- 검색창 -->
                <a href="#">
                    <a href="#"
                    ><img
                            src="https://i.postimg.cc/FHsr5pS7/free-icon-search.png"
                            alt=""
                    /></a>
                </a>
                <!-- 2 -->
                <!-- 로그인 -->
                <a href="/member/sign" id="login"
                ><img
                        src="https://i.postimg.cc/1RHr5RT4/free-icon-user.png"
                        alt=""
                /></a>


<!--                <script>-->
<!--                    document.querySelector('#login').addEventListener('click', function(event) {-->
<!--                        event.preventDefault(); // 기본 동작(즉, 페이지 이동)을 중단합니다.-->

<!--                        fetch('/savePreviousURL') // 서블릿을 호출하여 현재 URL을 세션에 저장합니다.-->
<!--                        .then(response => {-->
<!--                            if(response.ok) {-->
<!--                                // 성공적으로 URL이 저장되었으면 기본 동작(즉, 페이지 이동)을 계속합니다.-->
<!--                                window.location.href = event.target.getAttribute('href');-->
<!--                            } else {-->
<!--                                console.error('Failed to save the URL.');-->
<!--                            }-->
<!--                        })-->
<!--                        .catch(error => console.error('Error:', error));-->
<!--                    });-->
<!--                </script>-->

            </div>

            <!-- 전체메뉴바 -->
            <div class="all-menubar">
                <div class="all-menubar-hover">
                    <a href="#"
                    ><img
                            src="https://i.postimg.cc/3wRP9bvF/free-icon-menu.png"
                            alt="전체메뉴바"
                    /></a>
                </div>
                <!-- 3차메뉴 -->
                <nav>
                    <div class="menu-3">
                        <div class="container">
                            <form id="myForm" th:action="@{/car/list/hyundai}" th:object="${SearchForm}" method="post">
                                <ul>
                                    <!-- (li>a[href="#"]{Our Stories})*4 -->
                                    <li>
                                        <a href="#"><p class="tit">Car Brand</p></a>
                                    </li>
                                    <li>
                                        <input
                                                id="brand1"
                                                type="checkbox"
                                                name="brand"
                                                value="현대"
                                        />
                                        <label for="brand1">현대</label>
                                    </li>
                                    <li>
                                        <input
                                                id="brand2"
                                                type="checkbox"
                                                name="brand"
                                                value="기아"
                                        />
                                        <label for="brand2">기아</label>
                                    </li>
                                </ul>
                                <script>
                                    // 모든 체크박스 요소
                                    const checkboxes = document.querySelectorAll(
                                      'input[name="brand"]'
                                    );

                                    // 각 체크박스에 대한 이벤트 리스너
                                    checkboxes.forEach((checkbox) => {
                                      checkbox.addEventListener("change", function () {
                                        // 체크박스의 형제 레이블
                                        const label = this.nextElementSibling;

                                        // 체크박스가 체크되었는지 확인하고 레이블의 색상을 변경
                                        if (this.checked) {
                                          label.style.color = "blue"; // 체크되었을 때 파란색으로 변경
                                        } else {
                                          label.style.color = "black"; // 체크 해제되었을 때 검은색으로 변경
                                        }
                                      });
                                    });
                                </script>
                                <ul>
                                    <li>
                                        <a href="#"><p class="tit">Vehicle Size</p></a>
                                    </li>
                                    <li>
                                        <input
                                                id="size1"
                                                type="checkbox"
                                                name="size"
                                                value="소형"
                                        />
                                        <label for="size1">소형</label>
                                    </li>
                                    <li>
                                        <input
                                                id="size2"
                                                type="checkbox"
                                                name="size"
                                                value="중형"
                                        />
                                        <label for="size2">중형</label>
                                    </li>
                                    <li>
                                        <input
                                                id="size3"
                                                type="checkbox"
                                                name="size"
                                                value="대형"
                                        />
                                        <label for="size3">대형</label>
                                    </li>
                                    <li>
                                        <input
                                                id="size4"
                                                type="checkbox"
                                                name="size"
                                                value="소형SUV"
                                        />
                                        <label for="size4">소형SUV</label>
                                    </li>
                                    <li>
                                        <input
                                                id="size5"
                                                type="checkbox"
                                                name="size"
                                                value="대형SUV"
                                        />
                                        <label for="size5">대형SUV</label>
                                    </li>
                                </ul>
                                <script>
                                    // 모든 체크박스 요소
                                    const checkboxes2 =
                                      document.querySelectorAll('input[name="size"]');

                                    // 각 체크박스에 대한 이벤트 리스너를 등록
                                    checkboxes2.forEach((checkbox) => {
                                      checkbox.addEventListener("change", function () {
                                        // 체크박스의 형제 레이블
                                        const label = this.nextElementSibling;

                                        // 체크박스가 체크되었는지 확인하고 레이블의 색상을 변경
                                        if (this.checked) {
                                          label.style.color = "blue"; // 체크되었을 때 파란색으로 변경
                                        } else {
                                          label.style.color = "black"; // 체크 해제되었을 때 검은색으로 변경
                                        }
                                      });
                                    });
                                </script>
                                <ul>
                                    <li>
                                        <a href="#"><p class="tit">Engine</p> </a>
                                    </li>
                                    <li>
                                        <input
                                                id="engine1"
                                                type="checkbox"
                                                name="engine"
                                                value="가솔린"
                                                onclick="checkOnlyOne2(this)"
                                        />
                                        <label for="engine1">가솔린</label>
                                    </li>
                                    <li>
                                        <input
                                                id="engine2"
                                                type="checkbox"
                                                name="engine"
                                                value="디젤"
                                                onclick="checkOnlyOne2(this)"
                                        />
                                        <label for="engine2">디젤</label>
                                    </li>
                                    <li>
                                        <input
                                                id="engine3"
                                                type="checkbox"
                                                name="engine"
                                                value="하이브리드"
                                                onclick="checkOnlyOne2(this)"
                                        />
                                        <label for="engine3">하이브리드</label>
                                    </li>
                                    <li>
                                        <input
                                                id="engine4"
                                                type="checkbox"
                                                name="engine"
                                                value="LPG"
                                                onclick="checkOnlyOne2(this)"
                                        />
                                        <label for="engine4">LPG</label>
                                    </li>
                                    <li>
                                        <input
                                                id="engine5"
                                                type="checkbox"
                                                name="engine"
                                                value="전기차"
                                                onclick="checkOnlyOne2(this)"
                                        />
                                        <label for="engine5">전기차</label>
                                    </li>
                                </ul>
                                <script>
                                    function checkOnlyOne2(element) {
                                      const checkboxes = document.getElementsByName("engine");

                                      checkboxes.forEach((cb) => {
                                        if (cb !== element) {
                                          cb.checked = false;
                                          // 체크가 해제되면 레이블의 색상을 검은색으로 변경
                                          const label = cb.nextElementSibling;
                                          label.style.color = "black";
                                        }
                                      });

                                      // 체크 상태를 업데이트한 후, 현재 체크된 checkbox의 레이블 색상을 파란색으로 변경
                                      const label = element.nextElementSibling;
                                      if (element.checked) {
                                        label.style.color = "blue";
                                      } else {
                                        label.style.color = "black";
                                      }
                                    }
                                </script>
                                <ul>
                                    <li>
                                        <a href="#"
                                        ><p class="tit">
                                            Displacement <br />
                                            Volume(cc)
                                        </p>
                                        </a>
                                    </li>
                                    <li>
                                        <input
                                                id="displacement1"
                                                type="checkbox"
                                                name="displacement"
                                                value="1500"
                                                onclick="checkOnlyOne3(this)"
                                        />
                                        <label for="displacement1">1500cc 이하</label>
                                    </li>
                                    <li>
                                        <input
                                                id="displacement2"
                                                type="checkbox"
                                                name="displacement"
                                                value="2000"
                                                onclick="checkOnlyOne3(this)"
                                        />
                                        <label for="displacement2">2000cc 이하</label>
                                    </li>
                                    <li>
                                        <input
                                                id="displacement3"
                                                type="checkbox"
                                                name="displacement"
                                                value="3000"
                                                onclick="checkOnlyOne3(this)"
                                        />
                                        <label for="displacement3">3000cc 이하</label>
                                    </li>
                                </ul>
                                <script>
                                    function checkOnlyOne3(element) {
                                      const checkboxes =
                                        document.getElementsByName("displacement");

                                      checkboxes.forEach((cb) => {
                                        if (cb !== element) {
                                          cb.checked = false;
                                          // 체크가 해제되면 레이블의 색상을 검은색으로 변경
                                          const label = cb.nextElementSibling;
                                          label.style.color = "black";
                                        }
                                      });

                                      // 체크 상태를 업데이트한 후, 현재 체크된 checkbox의 레이블 색상을 파란색으로 변경
                                      const label = element.nextElementSibling;
                                      if (element.checked) {
                                        label.style.color = "blue";
                                      } else {
                                        label.style.color = "black";
                                      }
                                    }
                                </script>
                            </form>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>

<div class="swiper-container">
    <div class="swiper-wrapper"></div>
    <div class="swiper-pagination " style="margin-bottom: 250px;"></div>
    <div class="swiper-button-next "></div>
    <div class="swiper-button-prev"></div>
</div>
<div class="w-[500px] h-[100px] bottom-20 flex flex-row justify-between absolute left-1/2 transform -translate-x-1/2" >
    <a href="/car/color" class=" m-5">
        <img src="https://www.hyundai.com/static/images/common/button/ico_estimation.png" class="w-[50px] h-[50px]" alt="">
        <span class="text-xs">견적내기</span>
    </a>
    <a href="#" class=" m-5">
        <img src="https://www.hyundai.com/static/images/common/button/ico_purchase_consult.png" class="w-[50px] h-[50px]" alt="">
        <span class="text-xs">구매상담</span>
    </a>
    <a href="#" class=" m-5">
        <img src="https://www.hyundai.com/static/images/common/button/ico_test_driving.png" class="w-[50px] h-[50px]" alt="">
        <span class="text-xs">시승신청</span>
    </a>
    <a href="#" class=" m-5 text-center">
        <img src="https://www.hyundai.com/static/images/common/button/ico_customer_branch.png" class="w-[50px] h-[50px]" alt="">
        <span class="text-xs">판매처</span>
    </a>
    <a href="#" class=" m-5">
        <img src="https://www.hyundai.com/static/images/common/button/ico_service_reservation.png" class="w-[50px] h-[50px]" alt="">
        <span class="text-xs">정비예약</span>
    </a>

</div>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="script.js"></script>
</body>
</html>

<script>

    // swiper 객체 생성 (class 선택자로)
    const swiper = new Swiper(".swiper-container", {
        slidesPerView: 1,
        spaceBetween: 10,
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
        },
    });

    // 비동기식으로 데이터를 받아와서 슬라이더 업데이트
    function updateSliderWithData(data) {
        const newSlides = data.map(car => {
            return `
                <div class="swiper-slide" >
                    <div class="car-img img${car.id}" >
                        <h1>${car.name}</h1>
                        <a href="/car/detail/santafe">
                            <img src="${car.imgUrl}" alt="" />
                        </a>
                    </div>
                </div>
            `;
         });

     // Swiper 컨테이너 내부에 슬라이드 아이템을 추가
    swiper.removeAllSlides(); // 모든 슬라이드 제거
    swiper.appendSlide(newSlides); // 새로운 슬라이드 추가

    // 슬라이드가 업데이트되었으므로 Swiper를 업데이트
    swiper.slideTo(0); // 첫 번째 슬라이드로 이동

    }

    // 비동기식으로 데이터를 받아오는 함수
    function fetchCarDataAndRefreshSlider() {
        $.ajax({
            type: "GET",
            url: "/car/getCars", // 실제로 사용하는 엔드포인트로 변경해야 함
            dataType: "json",
            success: function(cars) {
                updateSliderWithData(cars);
            },
            error: function(error) {
                console.error("Error getting car data:", error);
            }
        });
    }

    // 초기 화면 로딩 시 슬라이더 업데이트
    $(document).ready(function() {
        fetchCarDataAndRefreshSlider();
    });

    $("input[type='checkbox']").change(function() {
        const formData = $("#myForm").serialize();
        sendFormData(formData);

    });

    function sendFormData(formData) {
        $.ajax({
            type: "POST",
            url: "/car/list/hyundai",
            data: formData,
            success: function(response) {
                console.log("Data sent successfully");
                fetchCarDataAndRefreshSlider();
            },
            error: function(error) {
                console.error("Error sending data:", error);
            }
        });
    }
</script>


<style>

    /* 노멀라이즈 */
/* Medium : 500 */
@font-face {
  font-family: "LeferiPoint-BlackA";
  src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2201-2@1.0/LeferiPoint-BlackA.woff")
    format("woff");
  font-weight: normal;
  font-style: normal;
}
* {
  box-sizing: border-box;
}
a {
  /* color: inherit; */
  /* color: inherit;
  사용하면 부모 요소의 색상 속성을 그대로 상속
  부모 요소와 동일한 텍스트 색상을 가지는 요소 */
  color: #363636;
  text-decoration: none;
}
html,
body {
  position: relative;
  height: 100%;
  font-family: "LeferiPoint-BlackA";
  /* font-size: 25px; */
  /* font-weight: 700; */
}
body {
  /* border: 2px solid red; */

  color: #000;
  margin: 0;
  padding: 0;
  list-style: none;
  background-image: url("https://www.hyundai.com/contents/mainbanner/car-bg-w.jpg");
}
/* =========탑바======== */
body,
ul,
li {
  margin: 0;
  padding: 0;
  list-style: none;
  font-size: 20px;
}
a {
  color: inherit;
  text-decoration: none;
}
h1 {
  margin: 0 auto;
}
/* logo 버튼  */
button {
  border: none;
  background-color: #f7f3f2;
  width: 350px;
}
header {
  height: auto;
  /*   border: 2px solid red; */
}
header > .container.mx-1880 {
  /*   border: 2px solid orange; */
  max-width: 1880px;
  height: 100px;
  margin-left: auto;
  margin-right: auto;
  display: flex;
}
header > .container > .top-bar__left-box {
  /* border: 2px solid indigo; */
  /* flex-grow: 1; */
  flex-basis: 0;
  height: auto;
  display: flex;
  justify-content: start;
  /* h1과, svg를 한줄에 같이 놓기위한 코드 */
}

/* 로고 */
header > .container > .top-bar__left-box > h1 > .logo-link {
  /* margin-right: 10px; */
  /* border: 2px solid yellow; */
  display: flex;
  justify-content: center;
  align-items: center;
  width: 280px;
}
/* header > .container > .top-bar__left-box > h1 > .logo-link > a {
  border: 1px solid red;
} */
header > .container > .top-bar__left-box > h1 > .logo-link > a > img {
  width: 200px;
  /* border: 1px solid orange; */
}

/* 오른쪽바 */
header > .container > .top-bar__right-box {
  /* border: 2px solid indigo; */
  flex-grow: 1;
  flex-basis: 0;
  display: flex;
  justify-content: flex-end;
}

/* hover하면 3차메뉴바 나옴 */
header > .container > .top-bar__right-box > nav:hover > .menu-3 {
  display: block;
}
header > .container > .top-bar__right-box > .all-menubar:hover > nav > .menu-3 {
  display: block;
}

/* 3차메뉴 */
header > .container > .top-bar__right-box > .all-menubar > nav > .menu-3 {
  /*   border: 1px solid red; */
  position: absolute;
  height: 500px;
  left: 0;
  top: 0;
  width: 100%;
  display: none;
  z-index: 10;
  /* min-width: var(--site-width); */
}
header > .container > .top-bar__right-box > .all-menubar > nav > .menu-3 {
  /* border: 1px solid black; */
}
header
  > .container
  > .top-bar__right-box
  > .all-menubar
  > nav
  > .menu-3
  > .container {
  width: 1920px;
  /* border: 2px solid orange; */
  height: 450px;
  margin-left: auto;
  margin-right: auto;
  display: flex;
  /* width: var(--site-width); */
}
header
  > .container
  > .top-bar__right-box
  > .all-menubar
  > nav
  > .menu-3
  > .container::before {
  content: "";
  width: 56px;
  height: 600px;
  /* border: 2px solid yellow; */
}
header
  > .container
  > .top-bar__right-box
  > .all-menubar
  > nav
  > .menu-3
  > .container
  > form {
  /*
	flex-item이기 때문에 width가 auto일때 0으로 작동된다.
	flex-item은 넓이가 최소화 된다는 특징을 가지고있기 때문이다
	*/
  width: 1800px;
  display: flex;
  justify-content: center;
  align-items: start;
  background-color: rgb(247, 243, 242, 0.9);
  box-shadow: 5px 5px 10px 0 rgba(72, 72, 72, 0.8);
  /* border: 1px solid red; */
  border-radius: 5px;
  backdrop-filter: blur(3px);
  /* margin-top: 5px; */
  background-position: center;
  background-repeat: no-repeat;
}
header
  > .container
  > .top-bar__right-box
  > .all-menubar
  > nav
  > .menu-3
  > .container
  > form
  > ul {
  width: 240px;
  margin-top: 20px;
  margin-left: 80px;
  margin-right: 80px;
  /* border: 1px solid blue; */
  color: #363636;
}
header
  > .container
  > .top-bar__right-box
  > .all-menubar
  > nav
  > .menu-3
  > .container
  > form
  > ul
  > li {
  /* border: 1px solid indigo; */
  text-align: center;
  padding-top: 10px;
  padding-bottom: 10px;
}
header
  > .container
  > .top-bar__right-box
  > .all-menubar
  > nav
  > .menu-3
  > .container
  > form
  > ul
  > li
  > input {
  /* background-color: #dedede; */
  /* border: 1px solid blue; */
  display: none;
}

header > .container > .top-bar__right-box > .all-menubar {
  /* border: 1px solid yellow; */
  height: 100%;
  display: flex;
  align-items: center;
}
header > .container > .top-bar__right-box > .all-menubar > .all-menubar-hover {
  /* border: 1px solid orange; */
  display: flex;
}

/* 탑바메뉴 제목 글씨그림자 */
.tit {
  /* border: 1px solid red; */
  color: #282828;
  font-size: 25px;
  text-shadow: 2px 2px 2px rgb(118, 116, 116);
}

/* 전체메뉴바 조절 */
header
  > .container
  > .top-bar__right-box
  > .all-menubar
  > .all-menubar-hover
  > a
  > img {
  width: 60px;
  height: 100%;
  vertical-align: bottom;
}

/* 모든 메뉴를 마우스 인식 시 배경색을 변경 */
.all-menubar ul > li:hover > label {
  background-color: rgba(255, 250, 236, 0.9);
  border-radius: 5px;
  padding: 5px 10px 5px 10px;
}

/* 2차 메뉴가 보이도록 만들어 보자 */
.all-menubar ul > li:hover > ul {
  display: block;
}

/* icon */
header > .container > .top-bar__right-box > .icon-box {
  /* border: 2px solid yellow; */
  height: 100%;
  display: flex;
  align-items: center;
}

/* display: flex; 적용해야 align-items: center; 작동가능 */
header > .container > .top-bar__right-box > .icon-box > a > img {
  margin-left: 10px;
  width: 60px;
  vertical-align: bottom;
}

.swiper-slide {
  position: relative;
}

/*  차 사진 */
.swiper-slide img {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, 10%);
  z-index: 1;
  width: 1200px;
  height: 500px;
}

/*  차 이름 */
.swiper-slide h1 {
  position: absolute;
  left: 20%;
  top: 30%;
  transform: translate(10%, 50%);
  z-index: 2;
}


</style>
